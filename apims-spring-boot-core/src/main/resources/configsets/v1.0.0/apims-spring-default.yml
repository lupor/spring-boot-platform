# some defaults resolved by ApimsEnvironmentPostProcessor
apims:
  api:
    mock-implementations-allowed: false
    token:
      unauthorized-retry-counter: 1
      crm-gateway:
        url: ""
        include-pattern: "${apims.api.crm-gateway.service-url}/**,"
        exclude-pattern: ''
        method: ""
        response-body-key-name: ""
        bearer-authorization: false
        authorization-header-name: "AgentAuthorization"
        client-id: ""
        secret-id: ""
        username: ""
        password: ""
        in-test-cases-enabled: true
        properties:
          signature-version: "1.0"
          sky-ott-provider: "SKY"
          sky-ott-territory: "DE"
          sky-ott-proposition: ""
        headers:
          _placeholder: ''
      marketing-cloud:
        url: "${apims.integration.endpoints.marketing-cloud-token-url}"
        include-pattern: "${apims.api.marketing-cloud.instance-url}/**,"
        exclude-pattern: ''
        method: "POST"
        response-body-key-name: "access_token"
        bearer-authorization: true
        authorization-header-name: "Authorization"
        client-id: ""
        secret-id: ""
        timeout-millis: -1
        in-test-cases-enabled: false
        properties:
          _placeholder: ''
        headers:
          _placeholder: ''
      salesforce:
        url: "${apims.integration.endpoints.salesforce-token-url}"
        include-pattern: "${apims.api.salesforce.instance-url}/**,"
        exclude-pattern: ''
        method: "GET"
        response-body-key-name: "BearerToken"
        bearer-authorization: true
        authorization-header-name: "Authorization"
        timeout-millis: -1
        in-test-cases-enabled: false
        properties:
          _placeholder: ''
        headers:
          x-sky-app-domain: "${apims.app.domain}"
          x-sky-app-name: "${apims.app.name}"
          x-sky-client-domain: "${apims.app.domain}"
          x-sky-client-name: "${apims.app.name}"
          x-sky-client-service-ci: "${apims.app.incident-mgmt.service-ci:SRVCI0017657}"
      tibco-rest:
        url: "${apims.integration.endpoints.tibco-rest-token-url}"
        include-pattern: "${apims.api.tibco-rest.orchestrator.service-url}/**, ${apims.api.tibco-rest.aopd.service-url}/**"
        exclude-pattern: ''
        method: "GET"
        response-body-key-name: "token"
        bearer-authorization: true
        authorization-header-name: "Authorization"
        role-id: ""
        secret-id: ""
        timeout-millis: -1
        in-test-cases-enabled: false
        properties:
          tanant-id: "TIBCO"
        headers:
          _placeholder: ''
      tibco-ws:
        scms:
          include-pattern: "${apims.api.tibco-ws.scms.service-url}/**,"
          exclude-pattern: ''
          security:
            enabled: false
            securment-actions: "UsernameToken"
            securment-password-type: "PasswordText"
            username: ""
            password: ""
        order-service:
          include-pattern: "${apims.api.tibco-ws.order-service.service-url}/**,"
          exclude-pattern: ''
          security:
            enabled: false
            securment-actions: "UsernameToken"
            securment-password-type: "PasswordText"
            username: ""
            password: ""
      ws:
        include-pattern: "${apims.ws.service-url}/**,"
        exclude-pattern: ''
        security:
          enabled: true
          securment-actions: "UsernameToken"
          securment-password-type: "PasswordText"
          username: ""
          password: ""
      vault-cryptography:
        url: "${apims.integration.endpoints.vault-token-url}"
        include-pattern: "${apims.api.vault.cryptography.instance-url}/v1/transit/**,"
        exclude-pattern: ''
        method: "POST"
        response-body-key-name: "client_token"
        bearer-authorization: false
        authorization-header-name: "X-Vault-Token"
        role-id: ""
        secret-id: ""
        timeout-millis: -1
        in-test-cases-enabled: false
        properties:
          _placeholder: ''
        headers:
          x-vault-namespace: /sky-de/sales-service/crm
      vlocity:
        url: "${apims.integration.endpoints.vlocity-token-url}"
        include-pattern: "${apims.integration.endpoints.vlocity-instance-url}/**,"
        exclude-pattern: ''
        method: "POST"
        response-body-key-name: "access_token"
        client-id: ""
        secret-id: ""
        token: ""
        bearer-authorization: true
        authorization-header-name: "Authorization"
        timeout-millis: -1
        in-test-cases-enabled: false
        properties:
          _placeholder: ''
        headers:
          _placeholder: ''
    authentication:
      signature:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.authentication-signature-instance-url}"
        service-url: "${apims.api.authentication.signature.instance-url}/api/signature"
    cms-contentstack:
      api-client-version: v1.0
      api-key: "kgQF10pbQGUKTDjJhotpEdsRvAWD9Om2"
      instance-url: "${apims.integration.endpoints.cms-contentstack-instance-url}"
      service-url: "${apims.api.cms-contentstack.instance-url}"
    crm-gateway:
      api-client-version: v1.0
      provider: "SKY"
      territory: "DE"
      instance-url: "${apims.integration.endpoints.crm-gateway-instance-url}"
      service-url: "${apims.api.crm-gateway.instance-url}/crm-proxy"
      pcs-url: "${apims.api.crm-gateway.service-url}/crm/${apims.api.crm-gateway.territory}/${apims.api.crm-gateway.provider}"
      dcm-url: "${apims.api.crm-gateway.service-url}/dcm/crm/${apims.api.crm-gateway.territory}/${apims.api.crm-gateway.provider}"
      implementation: "ApimsCrmGatewayClientImpl"
    customer:
      pin:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.customer-pin-instance-url}"
        service-url: "${apims.api.customer.pin.instance-url}/customers/{0}/{1}"
        change-url: "${apims.api.customer.pin.service-url}"
        resend-url: "${apims.api.customer.pin.service-url}/token"
        reset-url: "${apims.api.customer.pin.instance-url}/{1}/reset"
        retrieve-url: "${apims.api.customer.pin.service-url}"
        set-url: "${apims.api.customer.pin.service-url}"
        verify-url: "${apims.api.customer.pin.service-url}/verification"
        retrieve-mp-pin-url: "${apims.api.customer.pin.instance-url}/customers/{0}/secure/mppin"
        retrieve-sky-pin-url: "${apims.api.customer.pin.instance-url}/customers/{0}/secure/skypin"
      data:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.customer-data-instance-url}"
        service-url: "${apims.api.customer.data.instance-url}"
        login-data-v2-url: "${apims.api.customer.data.instance-url}/v2/customers/{0}/login-data"
        profile-data-v2-url: "${apims.api.customer.data.instance-url}/v2/customers/{0}"
        search-profile-data-v2-url: "${apims.api.customer.data.instance-url}/v2/customers/search?"
    marketing-cloud:
      api-client-version: v1.0
      api-version: v1
      instance-url: "${apims.integration.endpoints.marketing-cloud-instance-url}"
    salesforce:
      api-client-version: v1.0
      api-version: v55.0
      instance-url: "${apims.integration.endpoints.salesforce-instance-url}"
      instance-url-locator-impl: "ApimsSalesforceInstanceUrlLocatorTokenImpl"
      job-complete-waiting-sleep-time-millis: 5000
      max-job-complete-waiting-time-millis: -1
    tibco-rest:
      aopd:
        api-client-version: v1.0
        api-version: v1
        instance-url: "${apims.integration.endpoints.tibco-aopd-instance-url}"
        service-url: "${apims.api.tibco-rest.aopd.instance-url}/${apims.api.tibco-rest.aopd.api-version}"
      orchestrator:
        api-client-version: v1.0
        api-version: v1
        instance-url: "${apims.integration.endpoints.tibco-orchestrator-instance-url}"
        service-url: "${apims.api.tibco-rest.orchestrator.instance-url}/${apims.api.tibco-rest.orchestrator.api-version}"
    tibco-ws:
      scms:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.tibco-scms-instance-url}"
        service-url: "${apims.api.tibco-ws.scms.instance-url}/BusinessService/Scms"
      order-service:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.tibco-orchestrator-instance-url}"
        service-url: "${apims.api.tibco-ws.order-service.instance-url}/api/orderService"
    vault:
      cryptography:
        api-client-version: v1.0
        instance-url: "${apims.integration.endpoints.vault-instance-url}"
        service-url: "${apims.api.vault.cryptography.instance-url}/v1/transit/{0}"
        implementation: "ApimsVaultCryptoClientImpl"
        headers:
          x-vault-namespace: /sky-de/sales-service/crm
  app:
    instance-id: ${INSTANCEID:}
    host: ${HOSTNAME:localhost}
    type: ${APP_TYPE:UNKNOWN}
    name: ${APP_NAME:UNKNOWN}
    config-profile: dev
    config-profile-prefix: dev
    config-set: v1.0.0
    env: ${ENV_NAME:dev}
    namespace: ${NAMESPACE:dev}
    namespace-prefix: ${apims.app.resource-prefix}
    resource-prefix: ${RESOURCE_PREFIX:dev}
    service-startup-listener-enabled: true
    gcp-project-id: ${GCP_PROJECT_ID:}
    cicd-branch-name: ${CICD_BRANCH_NAME:}
    domain: ${APP_DOMAIN:}
    team: ${APP_TEAM:UNKNOWN}
    incident-mgmt:
      exception-cis:
        - id: "${apims.app.incident-mgmt.default-cis.couchbase}"
          packageInfo: com.couchbase
        - id: "${apims.app.incident-mgmt.default-cis.kafka}"
          packageInfo: org.apache.kafka
      rest-endpoint-cis:
        - id: "${apims.app.incident-mgmt.default-cis.domains.common}"
          url: "${apims.integration.endpoints.salesforce-instance-url}"
        - id: "${apims.app.incident-mgmt.default-cis.domains.common}"
          url: "${apims.integration.endpoints.salesforce-token-url}"
        - id: "${apims.app.incident-mgmt.default-cis.domains.account}"
          url: "${apims.integration.endpoints.customer-data-instance-url}"
        - id: "${apims.app.incident-mgmt.default-cis.salesforce}"
          url: "${apims.integration.endpoints.vlocity-token-url}"
        - id: "${apims.app.incident-mgmt.default-cis.domains.identity}"
          url: "${apims.integration.endpoints.customer-pin-instance-url}"
        - id: "${apims.app.incident-mgmt.default-cis.crm-gateway}"
          url: "${apims.integration.endpoints.crm-gateway-instance-url}"
        - id: "${apims.app.incident-mgmt.default-cis.salesforce-mc}"
          url: "${apims.integration.endpoints.marketing-cloud-instance-url}"
        - id: "${apims.app.incident-mgmt.default-cis.salesforce-mc}"
          url: "${apims.integration.endpoints.marketing-cloud-token-url}"
        - id: "${apims.app.incident-mgmt.default-cis.contentstack}"
          url: "${apims.integration.endpoints.cms-contentstack-instance-url}"
      default-cis:
        crm-gateway: "SRVCI0029626"
        contentstack: "SRVCI0001063"
        couchbase: "SRVCI0013748"
        kafka: "SRVCI0013750"
        salesforce: "SRVCI0013739"
        salesforce-mc: "SRVCI0014022"
        domains:
          account: "SRVCI0029626"
          billing-revenue: "SRVCI0029626"
          caif: "SRVCI0029626"
          campaign: "SRVCI0029626"
          care: "SRVCI0029626"
          common: "SRVCI0029626"
          content: "SRVCI0029626"
          contract: "SRVCI0029626"
          dazn: "SRVCI0018557"
          fraud: "SRVCI0029626"
          identity: "SRVCI0013746"
          interaction-channels: "SRVCI0029626"
          logistics: "SRVCI0029626"
          netflix: "SRVCI0029626"
          order-entry: "SRVCI0029626"
          order-management: "SRVCI0029626"
          payment: "SRVCI0017370"
          product-offer: "SRVCI0029626"
          rewards: "SRVCI0029626"
          risk: "SRVCI0029626"
          sky-go: "SRVCI0029626"
          sky-pil: "SRVCI0029626"
          sky-store: "SRVCI0029626"
          transcomm: "SRVCI0029626"
  aspects:
    create-new-span: true
    listeners:
      auth:
        enabled: ${apims.web.auth.enabled}
      kafka-template-synchronizer:
        enabled: true
      logging:
        enabled: true
        max-length: 15000
        save-log-lines-as-span-tag: "all"
        save-log-lines-span-tag-max-length: 1000
      new-trace-id:
        enabled: true
      mdc:
        enabled: true
        global-fields:
          team: "${apims.app.team}"
        global-fields-prefix: "apims."
        prefix: "apims."
        enable-sky-headers: true
        remote-fields:
          correlationId: "correlationId"
          customerId: "customerId"
          middlewareId: "middlewareId"
          orderId: "orderId"
          contractId: "contractId"
      metrics:
        enabled: true
        ignored-components: ""
    serializer:
      mask-keys: "secureValue, password, newPassword, oldPassword, new-password, old-password, pin, newPin, oldPin, codepin, role-id, secret-id, token, Token, BearerToken, client_secret, client_token, access_token, role_id, secret_id, ciphertext, signed_string, plaintext, Authorization, authorization, x-forwarded-client-cert, x-envoy-peer-metadata"
      additional-mask-keys: ""
      mask-value: "___masked___"
      default-max-characters: ${apims.aspects.listeners.logging.max-length}
    component-enabled: true
    controller-enabled: true
    controller-auto-validate-response: true
    endpoint-enabled: true
    message-handler-enabled: true
    kafka-template-enabled: true
    pubsub-enabled: true
    repository-enabled: true
    rest-client-enabled: true
    rest-contoller-enabled: true
    service-enabled: true
    storage-enabled: true
    web-service-client-enabled: true
  async:
    core-pool-size: 1
    max-pool-size: -1
    keep-alive-seconds: 60
    queue-capacity: -1
    allow-core-thread-timeout: false
    prestart-all-core-threads: false
    thread-name-prefix: "ApimsAsyncThread-"
  caching:
    expire-minutes: 5
    maximum-size: 1000
    record-stats: false
    second-cache-manager-expire-minutes: 30
    second-cache-manager-maximum-size: 1000
    second-cache-manager-record-stats: false
  cli:
    enabled: false
    show-help-as-default: true
    shutdown-after-main-execution: true
  cloud:
    gcp:
      pubsub:
        consumer:
          ack-mode: MANUAL
          subscriptions:
            _placeholder: ''
        producer:
          topics:
            _placeholder: ''
      storage:
        buckets:
          _placeholder: ''
  couchbase:
    encryption:
      enabled: false
      dek-path: ${apims.app.env}/couchbase-dek/${apims.app.domain}
      kek:
        enabled: true
        path: transit/couchbase-kek-${apims.app.domain}
      re-encryption:
        enabled: false
        cron-expression: "0 0 2 * * 0"
        max-execution-minutes: 120
        min-days-since-last-update: 90
    enabled: true
    auto-resolve-enabled-flag: true
    caching:
      enabled: false
      collection: "cache"
      expiry-seconds: 10
      cachePrefix: "${apims.app.name}::${apims.app.build-version}::"
  features:
    enabled: true
    service-features:
      _placeholder: ''
  kubernetes:
    pod-election:
      enabled: false
      k8sLeaseName: ${apims.app.name}
      k8sLeaseIdentity: ${apims.app.host}
      k8sNamespace: ns-apims-${apims.app.config-profile}
  object-mapper-config:
    date-time-serializer-write-iso-date-with-timezone: false
  rest:
    report-not-handled-http-errors-as-status-code: -1
    enabled: true
    expand-uri-vars: true
    auto-validate-request: false
    auto-validate-response: true
    prevent-double-encoding: false
    headers:
      x-sky-app-domain: "${apims.app.domain}"
      x-sky-app-name: "${apims.app.name}"
      x-sky-client-domain: "${apims.app.domain}"
      x-sky-client-name: "${apims.app.name}"
      x-sky-client-service-ci: "${apims.app.incident-mgmt.service-ci:SRVCI0017657}"
    additional-headers:
      _placeholder: ''
  sftp:
    enabled: true
    host: 127.0.0.1
    port: 2222
    allow-unknown-keys: true
    strict-host-key-checking: "no"
    user: foo
    password: pass
    cached-sessions: 1
    cached-session-max-lifetime: 60
    download-directory: "/"
    download-directory-read-only: false
    auto-prevent-duplicate-file-downloads: false
    upload-directory: "/"
    download-archive-directory: "${apims.sftp.download-directory}/archive"
    download-to-local-directory: "${java.io.tmpdir}/apims/sftp/${apims.app.name}/download"
    download-file-filter: "*.csv"
    download-file-min-age-seconds: 2
    download-poller-enabled: false
    download-poller-cron-expression: "0 0/1 * * * *"
    download-poller-max-messages-per-poll: -1
    download-poller-cache-remote-file-names: false
    delete-downloaded-files-immediately: false
    save-processed-files-in-archive-directory: true
    download-file-name-suffix: ".download"
    archive-file-name-prefix: ""
    successful-file-name-suffix: ".successful"
    failed-file-name-suffix: ".failed"
    download-failed-file-name-suffix: ".download-failed"
    in-progress-file-name-suffix: ".inprogress"
    channel-properties:
      connect-timeout-millis: 20000
      download-use-temporary-file-name: true
      upload-use-temporary-file-name: true
      upload-temporary-file-suffix: ".writing"
      security-scan-activated: true
      security-scan-wait-sleep-time-millis: 2000
      security-scan-wait-max-time-millis: 21000
  sftp-2:
    enabled: false
    host: 127.0.0.1
    port: 2222
    allow-unknown-keys: true
    user: foo
    password: pass
    cached-sessions: 1
    cached-session-max-lifetime: 60
    download-directory: "/"
    download-directory-read-only: false
    auto-prevent-duplicate-file-downloads: false
    upload-directory: "/"
    download-archive-directory: "${apims.sftp-2.download-directory}/archive"
    download-to-local-directory: "${java.io.tmpdir}/apims/sftp-2/${apims.app.name}/download"
    download-file-filter: "*.csv"
    download-file-min-age-seconds: 2
    download-poller-enabled: false
    download-poller-cron-expression: "0 0/1 * * * *"
    download-poller-max-messages-per-poll: -1
    delete-downloaded-files-immediately: false
    save-processed-files-in-archive-directory: true
    download-file-name-suffix: ".download"
    archive-file-name-prefix: ""
    successful-file-name-suffix: ".successful"
    failed-file-name-suffix: ".failed"
    download-failed-file-name-suffix: ".download-failed"
    in-progress-file-name-suffix: ".inprogress"
    channel-properties:
      connect-timeout-millis: 20000
      download-use-temporary-file-name: true
      upload-use-temporary-file-name: true
      upload-temporary-file-suffix: ".writing"
      security-scan-activated: true
      security-scan-wait-sleep-time-millis: 2000
      security-scan-wait-max-time-millis: 21000
  ssh:
    enabled: false
    host: 127.0.0.1
    port: 22222
    allow-unknown-keys: true
    user: foo
    password: pass
    cached-sessions: 1
    cached-session-max-lifetime: 60
    channel-properties:
      connect-timeout-millis: 20000
  startup-check:
    check-vault-values: true
    check-forbidden-application-properties: false
    forbidden-application-properties: "spring.sleuth.*, spring.zipkin.*"
    throw-exception-on-invalid-domain-enum: false
    throw-exception-on-invalid-team-enum: false
  tasking:
    core-pool-size: 1
    max-pool-size: -1
    keep-alive-seconds: 60
    queue-capacity: -1
    allow-core-thread-timeout: false
    prestart-all-core-threads: false
    thread-name-prefix: "ApimsTaskThread-"
  integration:
    endpoints:
      apimsdb-server: "apims-db.${apims.app.env}.nc.gcp.internal.skycdp.de:5432"
      toolsdb-server: "tools-db.${apims.app.env}.nc.gcp.internal.skycdp.de:5432"
      couchbase-servers: "couchbases://cb-nc01-ew3.nc01.svc.ew3-a.uat.cbms.gcp.internal.skycdp.de"
      kafka-servers: "kafka-001.${apims.app.env}.nc.gcp.internal.skycdp.de:9093,kafka-002.${apims.app.env}.nc.gcp.internal.skycdp.de:9093,kafka-003.${apims.app.env}.nc.gcp.internal.skycdp.de:9093,kafka-004.${apims.app.env}.nc.gcp.internal.skycdp.de:9093,kafka-005.${apims.app.env}.nc.gcp.internal.skycdp.de:9093,kafka-006.${apims.app.env}.nc.gcp.internal.skycdp.de:9093"
      kafka-schema-servers: "https://kafka-001.${apims.app.env}.nc.gcp.internal.skycdp.de:8084,https://kafka-002.${apims.app.env}.nc.gcp.internal.skycdp.de:8084,https://kafka-003.${apims.app.env}.nc.gcp.internal.skycdp.de:8084,https://kafka-004.${apims.app.env}.nc.gcp.internal.skycdp.de:8084,https://kafka-005.${apims.app.env}.nc.gcp.internal.skycdp.de:8084,https://kafka-006.${apims.app.env}.nc.gcp.internal.skycdp.de:8084"
      authentication-signature-instance-url: "http://svc-authentication-signature-service:8080"
      cms-contentstack-instance-url: "http://svc-contentstack-datasync-api-server.ns-frontend-dev:3000"
      crm-gateway-instance-url: "https://uat-p.sky.com"
      customer-pin-instance-url: "http://svc-customer-pin-service:8080"
      customer-data-instance-url: "http://svc-customer-data-service:8080"
      marketing-cloud-instance-url: "https://mc3g5c-g6r45z9ljssp7p6r1rk24.rest.marketingcloudapis.com"
      marketing-cloud-token-url: "https://mc3g5c-g6r45z9ljssp7p6r1rk24.auth.marketingcloudapis.com/v2/token"
      netflix-partner-instance-url: "https://partnerapi.sandbox.netflix.com"
      salesforce-instance-url: "https://skyde--devskysf1.sandbox.my.salesforce.com"
      salesforce-token-url: "http://svc-customer-sf-token-service:8080?system=SFDC"
      tibco-aopd-instance-url: "https://aopd.tibco.dev.fo.gcp.internal.skycdp.de"
      tibco-orchestrator-instance-url: "https://orchestrator.tibco.dev.fo.gcp.internal.skycdp.de"
      tibco-scms-instance-url: "http://svc-http-mock:8080"
      tibco-rest-token-url: "http://svc-tibco-token-service:8080/token"
      vault-instance-url: "https://vault.dev.kms.si.gcp.internal.skycdp.de:8200"
      vault-token-url: "https://vault.dev.kms.si.gcp.internal.skycdp.de:8200/v1/auth/approle/login"
      vlocity-instance-url: "https://api.devskysf1.skyde.dc.vloc-dev.com"
      vlocity-token-url: "https://vlocity-dc-nonprod2-skyde.auth.eu-central-1.amazoncognito.com/oauth2/token"
    urls:
      _placeholder: ''
  jackson:
    enabled: true
  jobs:
    enabled: false
    implementation: "memory"
    default-source-collection-name: "_default"
    default-partition-size: 10000
    default-worker-threads: 1
    default-delete-jobs-days-offset: 30
  kafka:
    consumer:
      group-id: dev-${apims.app.name}
      default-error-handler-interval: 20000
      default-error-handler-max-failures: -1
      dlt:
        enabled: true
        group-based-retry-and-dlt-topics: false
        dlt-topic-suffix: '-dlt'
        retry-topic-suffix: '-retry'
        retry-attempts: 5
        last-retry-attempts: 10
        delay: 6000
        multiplier: 10
        auto-create-topics: ${spring.kafka.properties.allow.auto.create.topics:false}
        auto-create-num-partitions: 1
        auto-create-replication-factor: 1
        use-dlt-topic-on-no-retryable-exception: true
        central-dlt-topic-name: "${apims.app.resource-prefix}_central_dlq"
        central-dlt-topic-enabled: false
      topics:
        _placeholder: ''
    producer:
      topics:
        _placeholder: ''
      headers:
        x-sky-app-domain: "${apims.app.domain}"
        x-sky-app-name: "${apims.app.name}"
        x-sky-client-domain: "${apims.app.domain}"
        x-sky-client-name: "${apims.app.name}"
        x-sky-client-service-ci: "${apims.app.incident-mgmt.service-ci:SRVCI0017657}"
      additional-headers:
        _placeholder: ''
  metrics:
    enabled: true
    counted-annotation-enabled: false
    timed-annotation-enabled: false
    common-tags:
      apims_app_type: "${apims.app.type}"
      apims_app_host: "${apims.app.host}"
      apims_app_instance_id: "${apims.app.instance-id}"
      apims_app_domain: "${apims.app.domain:default}"
      apims_app_name: "${apims.app.name}"
      apims_app_env: "${apims.app.env}"
      apims_app_config_profile: "${apims.app.config-profile}"
      metrics_source: "apims"
  scheduling:
    rest-idle-connection-job:
      enabled: true
      cron-expression: ''
      fixed-delay: 60000
      initial-delay: 60000
    application-health-info-job:
      enabled: true
      cron-expression: ''
      fixed-delay: 300000
      initial-delay: 60000
  trace:
    force-record-trace-files: false
    max-rolling-files: 10
  web:
    auth:
      enabled: false
      default-roles: ""
      trusted-services:
        enabled: false
        trust-by-sky-headers: false
        domains-default-roles: "ROLE_ADMIN, ROLE_EDITOR, ROLE_READER"
        domains-roles:
          owndomain: "${apims.web.auth.trusted-services.domains-default-roles}"
          account: "${apims.web.auth.trusted-services.domains-default-roles}"
          billing-revenue: "${apims.web.auth.trusted-services.domains-default-roles}"
          caif: "${apims.web.auth.trusted-services.domains-default-roles}"
          campaign: "${apims.web.auth.trusted-services.domains-default-roles}"
          care: "${apims.web.auth.trusted-services.domains-default-roles}"
          content: "${apims.web.auth.trusted-services.domains-default-roles}"
          contract: "${apims.web.auth.trusted-services.domains-default-roles}"
          dazn: "${apims.web.auth.trusted-services.domains-default-roles}"
          fraud: "${apims.web.auth.trusted-services.domains-default-roles}"
          identity: "${apims.web.auth.trusted-services.domains-default-roles}"
          interaction-channels: "${apims.web.auth.trusted-services.domains-default-roles}"
          logistics: "${apims.web.auth.trusted-services.domains-default-roles}"
          netflix: "${apims.web.auth.trusted-services.domains-default-roles}"
          order-entry: "${apims.web.auth.trusted-services.domains-default-roles}"
          order-management: "${apims.web.auth.trusted-services.domains-default-roles}"
          payment: "${apims.web.auth.trusted-services.domains-default-roles}"
          product-offer: "${apims.web.auth.trusted-services.domains-default-roles}"
          rewards: "${apims.web.auth.trusted-services.domains-default-roles}"
          risk: "${apims.web.auth.trusted-services.domains-default-roles}"
          sky-go: "${apims.web.auth.trusted-services.domains-default-roles}"
          sky-pil: "${apims.web.auth.trusted-services.domains-default-roles}"
          transcomm: "${apims.web.auth.trusted-services.domains-default-roles}"
        services-default-roles: "ROLE_ADMIN, ROLE_EDITOR, ROLE_READER"
        services-roles:
          _placeholder: ''
      role-mapping:
        _placeholder: ''
      jwt-claim-name-roles: "groups,roles"
      aad-token-validator:
        enabled: true
        issuer: "https://login.microsoftonline.com/, https://sts.windows.net/"
        key-source-type: URL_LOCATION
        key-source-value: "https://login.microsoftonline.com/${apims.web.auth.aad-token-validator.tenant-id:tenant-id-not-set}/discovery/v2.0/keys"
        explicit-audience-check: true
        valid-audiences: "api://SCOPE_OID_NOT_CONFIGURED"
        tenant-id: "68b865d5-cf18-4b2b-82a4-a4eddb9c5237"
      additional-token-validator:
        enabled: false
        issuer: ""
        key-source-type: URL_LOCATION
        key-source-value: ""
        explicit-audience-check: false
        valid-audiences: ""
      service-token-validator:
        enabled: false
        issuer: "de.sky.apims"
        key-source-type: BYTE_SECRET_BASE_64
        key-source-value: ""
        explicit-audience-check: true
        valid-audiences: ""
      test-token-validator:
        enabled: false
    http-components:
      enabled: true
      connect-timeout: 10000
      request-timeout: 120000
      socket-timeout: 120000
      connection-time-to-live-secs: 300
      max-total-connections: 18000
      default-max-connections-per-route: 3000
      default-keep-alive-time-millis: 5000
      close-idle-connection-wait-time-secs: 20
      hostname-verifier-disabled: false
      trust-all-certificates: false
    logging:
      enabled: true
      include-query-string: true
      include-sky-headers: true
      include-headers: false
      include-payload: false
      max-payload-length: 1024
      header-predicate: ''
  ws:
    enabled: true
    instance-url: http://localhost:8080
    service-url: ${apims.ws.instance-url}/ws
    accept-gzip-encoding: false
    marshaller:
      context-path: ''
logging:
  pattern:
    level: "%5p |%-32.32X{traceId:-}|%-16.16X{spanId:-}|"
    correlation: ""
  level:
    com.jcraft: WARN
    com.couchbase.core: ERROR
    de.sky.newcrm: DEBUG
    de.sky.newcrm.apims.spring.core.aspects.around.ApimsAroundLoggingListener: DEBUG
    de.sky.newcrm.apims.spring.core.aspects.around.ApimsAroundMetricsListener: DEBUG
    de.sky.newcrm.apims.spring.core.env.ApimsApplicationReadyHandler: TRACE
    de.sky.newcrm.apims.spring.core.utils.scanner.ApimsClassPathScanningCandidateComponentProvider: WARN
    de.sky.newcrm.apims.spring.core.web.ApimsRequestLoggingFilter: INFO
    io.confluent.kafka.serializers.KafkaAvroSerializerConfig: ERROR
    org.apache.kafka.clients: ERROR
    org.apache.kafka.common: WARN
    org.hibernate.type.descriptor.java.spi.JavaTypeDescriptorRegistry: ERROR
    org.springframework.cache: TRACE
    org.springframework.context.annotation.ClassPathScanningCandidateComponentProvider: WARN
    org.springframework.boot.actuate.endpoint: ERROR
    org.springframework.boot.availability.ApplicationAvailabilityBean: INFO
    org.springframework.data.repository.config: ERROR
    org.springframework.web.cors.DefaultCorsProcessor: DEBUG
    org.springframework.web.filter.CommonsRequestLoggingFilter: DEBUG
    org.springframework.web.servlet.mvc.support.DefaultHandlerExceptionResolver: ERROR
    tracer: INFO
management:
  endpoint:
    health:
      probes:
        enabled: true
      show-details: always
      validate-group-membership: false
  endpoints:
    web:
      exposure:
        include: health, heapdump, threaddump, loggers, info, prometheus, flyway, openapi, swaggerui, env
      base-path: /
      path-mapping:
        prometheus: /metrics
  health:
    livenessstate.enabled: true
    readinessstate.enabled: true
    defaults.enabled: true
  info:
    defaults.enabled: true
    build.enabled: true
    git.enabled: true
    os.enabled: true
    java.enabled: true
  metrics:
    high-cardinality-client-uri: false
    distribution:
      # Prometheus currently has a scrape interval of 60s. The buffer length corresponds to metrics buckets each with a given expiry
      # here is the relevant config: https://github.com/1703/sky-newcrm-infrastructure-k8s-prometheus/blob/main/prometheus/values_prod.yaml
      expiry:
        "all": PT60s
      buffer-length:
        "all": 3
      percentiles-histogram:
        http.client.requests: true
        http.server.requests: true
        spring.kafka.listener: true
        spring.kafka.template: true
    enable:
      # If you activate more, please add them to the list here: https://sky.atlassian.net/wiki/spaces/CRM/pages/3889791151/MS+Guides+-+Monitoring+Metrics+SLIs
      # for a full list of the metrics that are available by default. Override the "all" property and set it to true
      all: false
      "executor": true
      "http.client.requests": true
      "http.server.requests": true
      "jvm.gc": true
      "jvm.memory": true
      "jvm.buffer": true
      "jvm.threads": true
      "process.cpu": true
      "system.cpu": true
      "spring.data": true
      "spring.kafka.listener": true
      "spring.kafka.template": true
      # Producer Metrics
      "kafka.producer.record.retry.rate": true
      "kafka.producer.record.error.rate": true
      "kafka.producer.buffer.available.bytes": true
      "kafka.producer.produce.throttle.time.avg": true
      "kafka.producer.compression.rate.avg": true
      "kafka.producer.request.latency.avg": true
      "kafka.producer.record.queue.time.avg": true
      "kafka.producer.bufferpool.wait.ratio": true
      "kafka.producer.failed.authentication.total": true
      "kafka.producer.outgoing.byte.rate": true
      "kafka.producer.record.send.rate": true
      "kafka.producer.batch.size.avg": true
      "kafka.producer.requests.in.flight": true
      "kafka.producer.record.size.avg": true
      "kafka.producer.request.rate": true
      "kafka.producer.request.size.avg": true
      "kafka.producer.response.rate": true
      "kafka.producer.connection.count": true
      "kafka.producer.connection.creation.rate": true
      "kafka.producer.connection.close.rate": true
      "kafka.producer.io.ratio": true
      "kafka.producer.io.wait.time.ns.avg": true
      "kafka.producer.io.time.ns.avg": true
      "kafka.producer.io.wait.ratio": true
      "kafka.producer.select.rate": true
      "kafka.producer.metadata.age": true
      # Consumer Metrics
      "kafka.consumer.coordinator.commit.rate": true
      "kafka.consumer.fetch.manager.fetch.throttle.time.avg": true
      "kafka.consumer.failed.authentication.rate": true
      "kafka.consumer.coordinator.rebalance.rate.per.hour": true
      "kafka.consumer.fetch.manager.bytes.consumed.rate": true
      "kafka.consumer.fetch.manager.records.consumed.rate": true
      "kafka.consumer.fetch.manager.fetch.rate": true
      "kafka.consumer.fetch.manager.fetch.size.avg": true
      "kafka.consumer.fetch.manager.fetch.latency.avg": true
      "kafka.consumer.fetch.manager.fetch.latency.max": true
      "kafka.consumer.time.between.poll.avg": true
      "kafka.consumer.time.between.poll.max": true
      "kafka.consumer.last.poll.seconds.ago": true
      "kafka.consumer.poll.idle.ratio.avg": true
      "kafka.consumer.coordinator.commit.latency.avg": true
      "kafka.consumer.connection.count": true
      "kafka.consumer.response.rate": true
      "kafka.consumer.fetch.manager.records.lag.max": true
      "tomcat.threads": true
      "tomcat.sessions": false
      "tomcat.cache": false
      "tomcat.global": false
      "resilience4j.circuitbreaker.state": true
  server:
    port: 8801
  otlp:
    tracing:
      endpoint: http://opentelemetry-collector.opentelemetry-system:4317/v1/traces
      transport: grpc
      compression: gzip
  tracing:
    enabled: true
    baggage:
      enabled: true
      remote-fields: x-sky-requestid, x-sky-contactchannel, x-sky-tracing-session
      correlation:
        enabled: true
        fields: x-sky-requestid, x-sky-contactchannel, x-sky-tracing-session
    sampling:
      probability: 0
server:
  error:
    include-message: always
    include-exception: false
    include-stacktrace: never
  port: 8080
  tomcat:
    mbeanregistry:
      enabled: true
    threads:
      max: 20
      max-queue-capacity: 1000
  servlet:
    context-path: /
spring:
  application:
    name: ${apims.app.name}
  cloud:
    gcp:
      core:
        enabled: true
      logging:
        enabled: true
      pubsub:
        enabled: false
        subscriber:
          executor-threads: "4"
      #        credentials:
      #          location: file:/vault/secrets/google-app-credentials-pubsub.json
      storage:
        enabled: false
      #        credentials:
      #          location: file:/vault/secrets/google-app-credentials-storage.json
      trace:
        enabled: false
        pubsub:
          enabled: true
    vault:
      uri: ${apims.integration.endpoints.vault-instance-url}
      namespace: /sky-de/sales-service/crm
      authentication: kubernetes
      kubernetes:
        role: apims-reader
        kubernetes-path: kubernetes-nc-${apims.app.env}
      enabled: false

  couchbase:
    namespace: "${apims.app.config-profile}"
    namespace-prefix: "${apims.app.config-profile-prefix}"
    hostname: "${apims.integration.endpoints.couchbase-servers}"
    bucket: "${apims.app.env}"
    scopename: "${apims.app.domain}"
    username: ""
    password: ""
    second-bucket: ""
    second-scopename: ""
    second-username: ""
    second-password: ""
    env:
      auditor-aware-enabled: true
      repositories-base-package: "de.sky"
      auto-index-creation: false
      collection-mapping-type-key: ""
      collection-mapping-type-value: ""
      io:
        networkResolution: external
      retry-strategy:
        first-backoff-millis: 1
        max-backoff-millis: 1000
      security:
        auth-method: keystore
        auth-key-store-type: ${COUCHBASE_CLIENT_KEYSTORE_TYPE:JKS}
        auth-key-store-location: ${COUCHBASE_CLIENT_KEYSTORE_PATH:}
        auth-key-store-password: ${COUCHBASE_CLIENT_KEYSTORE_PASSWORD:changeit}
        tls-enabled: true
        tls-hostname-verification-enable: true
        tls-trust-store-type: ${COUCHBASE_CLIENT_TRUSTSTORE_TYPE:JKS}
        tls-trust-store-location: ${COUCHBASE_CLIENT_TRUSTSTORE_PATH:}
        tls-trust-store-password: ${COUCHBASE_CLIENT_TRUSTSTORE_PASSWORD:changeit}
      timeouts:
        analytics: 75000
        connect: 25000
        disconnect: 25000
        eventing: 75000
        key-value: 2500
        key-value-durable: 2500
        management: 75000
        query: 75000
        search: 75000
        view: 75000
  datasource:
    show_sql: false
    generate-ddl: false
    ddl-auto: validate
    initialization-mode: always
    platform: PostgreSQL
    driver-class-name: "org.postgresql.Driver"
    database: "de-nc-sq-in-db-apims-crm"
    schema: "${apims.app.domain}"
    url: "jdbc:postgresql://${apims.integration.endpoints.apimsdb-server}/${spring.datasource.database}?currentSchema=${spring.datasource.schema}"
    username: ""
    password: ""
    hikari:
      connection-timeout: 20000
      minimum-idle: 0
      maximum-pool-size: 10
      idle-timeout: 10000
      max-lifetime: 300000
      auto-commit: true
  flyway:
    enabled: false
    baseline-on-migrate: true
    user: "${spring.datasource.username}"
    password: "${spring.datasource.password}"
    default-schema: "${spring.datasource.schema}"
    create-schemas: false
    driver-class-name: "${spring.datasource.driver-class-name}"
    locations: "classpath:database/postgresql"
    table: "fwh_${apims.app.resource-name}"
  jpa:
    generate-ddl: "${spring.datasource.generate-ddl:false}"
    hibernate.ddl-auto: "${spring.datasource.ddl-auto:none}"
    show_sql: "${spring.datasource.show_sql:false}"
    open-in-view: false
  kafka:
    bootstrap-servers: "${apims.integration.endpoints.kafka-servers}"
    properties:
      metrics.sample.window.ms: 60000
      allow.auto.create.topics: false
      auto.register.schemas: false
      avro.remove.java.properties: true
      reconnect.backoff.ms: 5000
      reconnect.backoff.max.ms: 10000
      schema.registry.url: "${apims.integration.endpoints.kafka-schema-servers}"
      specific.avro.reader: true
      use.latest.version: false
      apims.kafka.serializer:
        serialize-string-value-without-schema-id-enabled: false
        serialize-string-value-without-schema-id-topics: "*"
      apims.kafka.deserializer:
        deserialize-to-generics-allowed: false
      spring.deserializer:
        key.delegate.class: org.apache.kafka.common.serialization.StringDeserializer
        value.delegate.class: de.sky.newcrm.apims.spring.core.kafka.serializers.ApimsKafkaDeserializer
    consumer:
      group-id: dev-${apims.app.name}-default
      auto-offset-reset: earliest
      key-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
      value-deserializer: org.springframework.kafka.support.serializer.ErrorHandlingDeserializer
      properties:
        interceptor.classes: de.sky.newcrm.apims.spring.core.kafka.consumer.ApimsConsumerInterceptor
        auth.exception.retry.interval.ms: 3600000
        max.poll.interval.ms: 3660000
        max.poll.records: 1
    producer:
      properties:
        delivery.timeout.ms: 10000
        interceptor.classes: de.sky.newcrm.apims.spring.core.kafka.producer.ApimsProducerInterceptor
        linger.ms: 0
        request.timeout.ms: 10000
      key-serializer: org.apache.kafka.common.serialization.StringSerializer
      value-serializer: de.sky.newcrm.apims.spring.core.kafka.serializers.ApimsKafkaSerializer
    listener:
      ack-mode: record
      concurrency: 1
      auto-startup: true
    security:
      protocol: "SSL"
    ssl:
      key-store-location: file://${KAFKA_CLIENT_KEYSTORE_PATH:/usr/share/application/kafka-client.jks}
      key-store-password: ${KAFKA_CLIENT_KEYSTORE_PASSWORD:changeit}
    template:
      auto-flush: false
  main:
    banner-mode: "log"
  banner:
    location: classpath:apims-banner.txt
  mvc:
    dispatch-options-request: true
  servlet:
    multipart:
      max-file-size: 2MB
      max-request-size: 2MB
springdoc:
  use-management-port: true
  show-actuator: false
  api-docs:
    enabled: false
  swagger-ui:
    enabled: false
    operationsSorter: method
    tryItOutEnabled: true
